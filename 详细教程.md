## 叮咚买菜抓包+监控+重写

### 需要的软件

1. quantumult X
    1. 抓包
    2. 定时监控
    3. 重写返回值
    4. 可以实现科学上网（具体百度）
2. bark（推送通知）

### quantumult X软件配置证书
具体百度

### 抓包
见附件抓包教程
<video src="/Users/wulong/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/6edc41010de3e4e2e61bc80455541af7/Message/MessageTemp/35c9c53be1575ee0b1040ecbc4649163/Video/1649145554274777.mp4"></video>



### 定时监控空余运力
见附件定时监控教程
```
推送代码
/**
 * 上面的内容替换成你刚刚抓包的内容
 * 
 */

const url1 = `https://api.day.app/替换成bark软件的key/%E6%8E%A2%E5%AD%90%E6%9D%A5%E6%8A%A5%20%E2%86%92%20%E5%8F%AE%E5%92%9A%E4%B9%B0%E8%8F%9C/%E6%9C%89%E7%A9%BA%E9%97%B2%E8%BF%90%E5%8A%9B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%B8%8B%E5%8D%95%E5%95%A6%EF%BC%8C%E7%82%B9%E5%87%BB%E8%B7%B3%E8%BD%AC%E4%B8%8B%E5%8D%95!?icon=https://raw.githubusercontent.com/Orz-3/mini/master/Color/mcdd.png&url=ddxq://`;
const method1 = `GET`;
const headers1 = {
'User-Agent' : `Mozilla/5.0 (iPhone; CPU iPhone OS 15_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1`,
'Host' : `api.day.app`,
'Connection' : `keep-alive`,
'Accept-Language' : `zh-CN,zh-Hans;q=0.9`,
'Accept-Encoding' : `gzip, deflate, br`,
'Accept' : `text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`
};
const body1 = ``;

const myRequest1 = {
    url: url1,
    method: method1,
    headers: headers1,
    body: body1
};


const myRequest = {
    url: url,
    method: method,
    headers: headers,
    body: body
};


function pushData(){
  $task.fetch(myRequest1).then(response => {
	
}, reason => {
});
}

function getTime(){
	console.log('🎉 叮咚买菜开始\n')
	$task.fetch(myRequest).then(response => {
	var json = JSON.parse(response.body);
    if(json.success && getFlag(json)){
		pushData();
		console.log(response.body)
		console.log('有运力，下单信息已推送至手机！')
	}else{
		console.log("运力已满，正在持续监控...");
	}
}, reason => {
	console.log(reason)
});

}

function getFlag(res){
    res.data[0].time.forEach(function(item){
        if(!item.fullFlag){
            return true;
        }
    })
    return false;
}

getTime();
```

#### bark软件key
见附件
